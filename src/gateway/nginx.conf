worker_processes auto;
events { worker_connections 1024; }

http {
  sendfile on;
  client_max_body_size 20m;

  upstream user_svc   { server user-service:8080; }
  upstream trip_svc   { server trip-service:8080; }
  upstream driver_svc { server driver-service:8080; }

  server {
    listen 80;

    location /api/auth/     { proxy_pass http://user_svc/; }
    location /api/users/    { proxy_pass http://user_svc/; }
    location /api/trips/    { proxy_pass http://trip_svc/; }
    location /api/drivers/  { proxy_pass http://driver_svc/; }

    location /health { return 200 "ok"; }
  }
}
